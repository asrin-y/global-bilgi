{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let UserDataListComponent = class UserDataListComponent {\n  constructor(userDataService, formBuilder, http) {\n    this.userDataService = userDataService;\n    this.formBuilder = formBuilder;\n    this.http = http;\n    this.userDataList = [];\n    this.apiBaseUrl = 'http://localhost:5000';\n    this.isEdit = false;\n    this.isAdmin = false;\n    this.initializeForm();\n  }\n  initializeForm() {\n    this.newRecordForm = this.formBuilder.group({\n      begin: [''],\n      end: [''],\n      dateInfo: [''],\n      excuse: [''],\n      excuseHours: [null],\n      timeout: [null]\n    });\n  }\n  ngOnInit() {\n    this.fetchUserData(); // Fetch initial data when the component initializes\n  }\n\n  editRecord(record) {\n    // Implement your edit logic here\n    this.isEdit = !this.isEdit;\n  }\n  removeRecord(record) {\n    const idToDelete = record.id; // Assuming you have an 'id' property in your UserData model\n    if (!idToDelete) {\n      return;\n    }\n    // Make an HTTP DELETE request to delete the record\n    this.http.delete(`${this.apiBaseUrl}/deleteUserData/${idToDelete}`).subscribe(() => {\n      console.log('User data deleted successfully');\n      this.fetchUserData(); // Fetch data after a successful deletion\n    }, error => {\n      console.error('Failed to delete user data:', error);\n    });\n  }\n  logFormValues() {\n    const formValues = this.newRecordForm.value;\n    console.log('Form Values:', formValues);\n    const userData = {\n      agentId: \"glb901\",\n      firstName: \"Asrin\",\n      lastName: \"Yilmaz\",\n      begin: formValues.begin,\n      end: formValues.end,\n      dateInfo: formValues.dateInfo,\n      excuse: formValues.excuse,\n      excuseHours: formValues.excuseHours,\n      timeout: formValues.timeout\n    };\n    console.log('UserData:', userData);\n    this.http.post(`${this.apiBaseUrl}/addUserData`, userData).subscribe(response => {\n      console.log('User data added successfully:', response);\n      this.fetchUserData(); // Fetch data after a successful addition\n    }, error => {\n      console.error('Failed to add user data:', error);\n    });\n  }\n  onSubmit() {\n    if (!this.isEdit) {\n      this.logFormValues();\n    } else {\n      this.isEdit = !this.isEdit;\n      this.update();\n    }\n    this.newRecordForm.reset();\n  }\n  update() {\n    const formValues = this.newRecordForm.value;\n    console.log('Form Values:', formValues);\n    const userData = {\n      begin: formValues.begin,\n      end: formValues.end,\n      dateInfo: formValues.dateInfo,\n      excuse: formValues.excuse,\n      excuseHours: formValues.excuseHours,\n      timeout: formValues.timeout\n    };\n    this.http.put(`${this.apiBaseUrl}/updateUserData/${this.editedRecordId}`, userData).subscribe(response => {\n      console.log('User data updated successfully:', response);\n      this.fetchUserData(); // Fetch data after a successful addition\n    }, error => {\n      console.error('Failed to add user data:', error);\n    });\n  }\n  fetchUserData() {\n    // Fetch the list of data from your service\n    this.userDataService.getRecordsByAgent().subscribe(data => {\n      this.userDataList = data;\n    });\n  }\n  loadFormValuesForEdit(record) {\n    // Assuming you have a UserData model with properties matching the form fields\n    this.newRecordForm.setValue({\n      begin: record.begin,\n      end: record.end,\n      dateInfo: record.dateInfo,\n      excuse: record.excuse,\n      excuseHours: record.excuseHours,\n      timeout: record.timeout\n    });\n    this.editedRecordId = record.id;\n    // Set the isEdit flag to true to indicate that it's an edit operation\n    this.isEdit = true;\n  }\n  cancelEdit() {\n    this.isEdit = !this.isEdit;\n    this.newRecordForm.reset();\n  }\n};\nUserDataListComponent = __decorate([Component({\n  selector: 'app-user-data-list',\n  templateUrl: './user-data-list.component.html',\n  styleUrls: ['./user-data-list.component.css']\n})], UserDataListComponent);","map":{"version":3,"names":["Component","UserDataListComponent","constructor","userDataService","formBuilder","http","userDataList","apiBaseUrl","isEdit","isAdmin","initializeForm","newRecordForm","group","begin","end","dateInfo","excuse","excuseHours","timeout","ngOnInit","fetchUserData","editRecord","record","removeRecord","idToDelete","id","delete","subscribe","console","log","error","logFormValues","formValues","value","userData","agentId","firstName","lastName","post","response","onSubmit","update","reset","put","editedRecordId","getRecordsByAgent","data","loadFormValuesForEdit","setValue","cancelEdit","__decorate","selector","templateUrl","styleUrls"],"sources":["/home/asrin/Desktop/global-bilgi/src/app/user-data-list/user-data-list.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { UserData } from '../userData.model';\nimport { UserDataService } from '../user-data.service';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-user-data-list',\n  templateUrl: './user-data-list.component.html',\n  styleUrls: ['./user-data-list.component.css']\n})\nexport class UserDataListComponent implements OnInit {\n  userDataList: UserData[] = [];\n  newRecordForm: FormGroup;\n  private apiBaseUrl = 'http://localhost:5000';\n  isEdit: boolean = false;\n  editedRecordId: number;\n  isAdmin: boolean = false;\n\n  constructor(private userDataService: UserDataService, private formBuilder: FormBuilder, private http: HttpClient) {\n    this.initializeForm();\n  }\n\n  initializeForm() {\n    this.newRecordForm = this.formBuilder.group({\n      begin: [''], // Add default values here or leave empty\n      end: [''],\n      dateInfo: [''],\n      excuse: [''],\n      excuseHours: [null],\n      timeout: [null]\n    });\n  }\n\n  ngOnInit(): void {\n    this.fetchUserData(); // Fetch initial data when the component initializes\n  }\n\n  editRecord(record: UserData) {\n    // Implement your edit logic here\n    this.isEdit = !this.isEdit\n  }\n  \n  removeRecord(record: UserData) {\n    const idToDelete = record.id; // Assuming you have an 'id' property in your UserData model\n    if (!idToDelete) {\n      return;\n    }\n\n    // Make an HTTP DELETE request to delete the record\n    this.http.delete(`${this.apiBaseUrl}/deleteUserData/${idToDelete}`).subscribe(\n      () => {\n        console.log('User data deleted successfully');\n        this.fetchUserData(); // Fetch data after a successful deletion\n      },\n      (error) => {\n        console.error('Failed to delete user data:', error);\n      }\n    );\n  }\n\n  logFormValues() {\n    const formValues = this.newRecordForm.value;\n    console.log('Form Values:', formValues);\n\n    const userData = {\n      agentId: \"glb901\",\n      firstName: \"Asrin\",\n      lastName: \"Yilmaz\",\n      begin: formValues.begin,\n      end: formValues.end,\n      dateInfo: formValues.dateInfo,\n      excuse: formValues.excuse,\n      excuseHours: formValues.excuseHours,\n      timeout: formValues.timeout,\n    };\n\n    console.log('UserData:', userData);\n\n    this.http.post(`${this.apiBaseUrl}/addUserData`, userData).subscribe(\n      (response) => {\n        console.log('User data added successfully:', response);\n        this.fetchUserData(); // Fetch data after a successful addition\n      },\n      (error) => {\n        console.error('Failed to add user data:', error);\n      }\n    );\n  }\n\n  onSubmit() {\n    if(!this.isEdit){\n      this.logFormValues();\n    }\n    else{\n      this.isEdit = !this.isEdit;\n      this.update();\n    }\n    this.newRecordForm.reset();\n  }\n\n  update(){\n    const formValues = this.newRecordForm.value;\n    console.log('Form Values:', formValues);\n\n    const userData = {\n      begin: formValues.begin,\n      end: formValues.end,\n      dateInfo: formValues.dateInfo,\n      excuse: formValues.excuse,\n      excuseHours: formValues.excuseHours,\n      timeout: formValues.timeout,\n    };\n\n    this.http.put(`${this.apiBaseUrl}/updateUserData/${this.editedRecordId}`, userData).subscribe(\n      (response) => {\n        console.log('User data updated successfully:', response);\n        this.fetchUserData(); // Fetch data after a successful addition\n      },\n      (error) => {\n        console.error('Failed to add user data:', error);\n      }\n    );\n  }\n\n  fetchUserData() {\n    // Fetch the list of data from your service\n    this.userDataService.getRecordsByAgent().subscribe((data) => {\n      this.userDataList = data;\n    });\n  }\n\n  loadFormValuesForEdit(record: UserData) {\n    // Assuming you have a UserData model with properties matching the form fields\n    this.newRecordForm.setValue({\n      begin: record.begin,\n      end: record.end,\n      dateInfo: record.dateInfo,\n      excuse: record.excuse,\n      excuseHours: record.excuseHours,\n      timeout: record.timeout\n    });\n  \n    this.editedRecordId = record.id;\n  \n    // Set the isEdit flag to true to indicate that it's an edit operation\n    this.isEdit = true;\n  }\n\n  cancelEdit(){\n    this.isEdit = !this.isEdit;\n    this.newRecordForm.reset();\n  }\n  \n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}